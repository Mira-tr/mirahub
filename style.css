/* /style.css */
:root{
  --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Noto Sans JP", "Hiragino Sans", "Yu Gothic UI", sans-serif;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Noto Sans Mono", monospace;

  --r: 18px;
  --r2: 14px;
  --r3: 12px;

  --s1: 6px;
  --s2: 10px;
  --s3: 14px;
  --s4: 18px;
  --s5: 24px;

  --shadow: 0 18px 44px rgba(0,0,0,.40);
  --shadow2: 0 10px 26px rgba(0,0,0,.28);
  --line: rgba(255,255,255,.10);

  --focus: 0 0 0 4px rgba(102,170,255,.14);

  --ease: cubic-bezier(.2,.8,.2,1);
  --t: 180ms var(--ease);
}

html[data-theme="dark"]{
  --bg0: #070B14;
  --bg1: #0B1021;
  --bg2: rgba(255,255,255,.03);

  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.66);
  --muted2: rgba(255,255,255,.52);

  --accent: #6AAEFF;
  --accent2: #9B7CFF;
  --gold: #F3D38A;

  --card: rgba(255,255,255,.03);
  --card2: rgba(255,255,255,.05);
  --glass: rgba(17,24,40,.72);
  --glass2: rgba(17,24,40,.86);

  --warn: rgba(255,120,150,.16);
  --warnLine: rgba(255,120,150,.38);

  --ok: rgba(120,255,210,.14);
  --okLine: rgba(120,255,210,.28);

  --ink: rgba(255,255,255,.05);
  --ink2: rgba(255,255,255,.08);

  --bgNoise: radial-gradient(1400px 700px at 10% -10%, rgba(106,174,255,.20), transparent 55%),
             radial-gradient(1200px 700px at 110% 20%, rgba(155,124,255,.16), transparent 55%),
             radial-gradient(900px 560px at 35% 120%, rgba(243,211,138,.10), transparent 60%);
}

html[data-theme="light"]{
  --bg0: #F7F2E8;
  --bg1: #FBFAF6;
  --bg2: rgba(10,15,30,.03);

  --text: rgba(14,18,30,.92);
  --muted: rgba(14,18,30,.68);
  --muted2: rgba(14,18,30,.54);

  --accent: #2E6BFF;
  --accent2: #6A3DFF;
  --gold: #9A6B1A;

  --card: rgba(255,255,255,.70);
  --card2: rgba(255,255,255,.86);
  --glass: rgba(255,255,255,.72);
  --glass2: rgba(255,255,255,.86);

  --warn: rgba(220,60,90,.10);
  --warnLine: rgba(220,60,90,.26);

  --ok: rgba(20,150,90,.10);
  --okLine: rgba(20,150,90,.22);

  --ink: rgba(14,18,30,.05);
  --ink2: rgba(14,18,30,.08);

  --bgNoise: radial-gradient(1200px 700px at 10% -10%, rgba(46,107,255,.12), transparent 56%),
             radial-gradient(900px 700px at 110% 18%, rgba(106,61,255,.10), transparent 58%),
             radial-gradient(900px 560px at 35% 120%, rgba(154,107,26,.10), transparent 62%);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background:
    var(--bgNoise),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow-x:hidden;
}

a{ color: inherit; text-decoration:none; }
button, input{
  font: inherit;
}
::selection{ background: rgba(106,174,255,.22); }

.layout-wrap{
  width: min(1100px, calc(100% - 28px));
  margin: 0 auto;
}

.layout-header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: color-mix(in oklab, var(--glass2) 70%, transparent);
  border-bottom: 1px solid var(--line);
  backdrop-filter: blur(16px);
}

.layout-header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 0;
  gap: 12px;
}

.brand{
  display:flex;
  align-items:center;
  gap: 10px;
  min-width: 160px;
}
.brand-dot{
  width: 10px;
  height: 10px;
  border-radius: 99px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 0 0 5px color-mix(in oklab, var(--accent) 14%, transparent);
}
.brand-link{
  font-weight: 900;
  letter-spacing: .06em;
}
.nav{
  display:flex;
  align-items:center;
  gap: 10px;
}
.nav-link{
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid transparent;
  color: var(--muted);
  transition: background var(--t), border-color var(--t), color var(--t), transform var(--t);
}
.nav-link:hover{
  color: var(--text);
  border-color: color-mix(in oklab, var(--accent) 22%, transparent);
  background: color-mix(in oklab, var(--card) 62%, transparent);
}

.icon-btn{
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--text);
  cursor:pointer;
  display:grid;
  place-items:center;
  transition: transform var(--t), border-color var(--t), background var(--t);
}
.icon-btn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 28%, transparent);
  background: color-mix(in oklab, var(--card2) 70%, transparent);
}
.icon-btn:focus-visible{ outline:none; box-shadow: var(--focus); }

.layout-footer{
  padding: 28px 0 44px;
  text-align:center;
  color: var(--muted2);
}

/* text utils */
.text-muted{ color: var(--muted); }
.text-tag{
  display:inline-flex;
  gap: 8px;
  align-items:center;
  font-size: 12px;
  letter-spacing: .16em;
  color: var(--muted);
  text-transform: uppercase;
}
.text-hero{
  margin: 12px 0 0;
  font-weight: 1000;
  letter-spacing: -0.01em;
  line-height: 1.08;
  font-size: clamp(30px, 5vw, 44px);
}
.text-lead{
  margin: 14px 0 0;
  line-height: 1.8;
  font-size: 15px;
}

/* buttons */
.btn-row{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  margin-top: 16px;
  align-items:center;
}
.btn{
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--text);
  padding: 12px 14px;
  border-radius: 14px;
  cursor:pointer;
  transition: transform var(--t), border-color var(--t), background var(--t);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 10px;
}
.btn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 26%, transparent);
  background: color-mix(in oklab, var(--card2) 68%, transparent);
}
.btn:focus-visible{ outline:none; box-shadow: var(--focus); }
.btn-primary{
  border-color: color-mix(in oklab, var(--accent) 42%, transparent);
  background: linear-gradient(135deg,
    color-mix(in oklab, var(--accent) 35%, transparent),
    color-mix(in oklab, var(--accent2) 28%, transparent)
  );
}
.btn-ghost{
  background: transparent;
}
.btn-sm{
  padding: 9px 12px;
  border-radius: 12px;
  font-size: 13px;
}

/* sections */
.section-card{
  margin-top: 16px;
  border: 1px solid var(--line);
  border-radius: 22px;
  background:
    radial-gradient(900px 320px at 12% 0%, color-mix(in oklab, var(--accent) 14%, transparent), transparent 55%),
    radial-gradient(700px 320px at 90% 10%, color-mix(in oklab, var(--accent2) 10%, transparent), transparent 55%),
    color-mix(in oklab, var(--glass) 80%, transparent);
  box-shadow: var(--shadow2);
  padding: 16px;
}
.section-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
}
.section-titleRow{ min-width: 0; }
.section-title{
  margin: 0;
  font-weight: 1000;
  letter-spacing: .02em;
}
.section-sub{
  margin-top: 6px;
  line-height: 1.6;
  font-size: 13px;
}
.section-actions{
  display:flex;
  align-items:center;
  gap: 10px;
}

/* HUB */
.hub{ padding: 16px 0 26px; }
.hero{
  margin-top: 12px;
  border: 1px solid var(--line);
  border-radius: 26px;
  padding: 18px;
  background:
    radial-gradient(1200px 480px at 20% -10%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 55%),
    radial-gradient(900px 460px at 120% 15%, color-mix(in oklab, var(--accent2) 16%, transparent), transparent 58%),
    color-mix(in oklab, var(--glass2) 88%, transparent);
  box-shadow: var(--shadow);
}
.hero-grid{
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 16px;
  align-items:stretch;
}
@media (max-width: 980px){
  .hero-grid{ grid-template-columns: 1fr; }
}

.glow{
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.kpis{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 14px;
}
.kpi{
  border: 1px solid var(--line);
  border-radius: 16px;
  background: color-mix(in oklab, var(--card) 70%, transparent);
  padding: 12px 12px;
}
.kpi-num{
  font-weight: 1000;
  font-size: 18px;
  letter-spacing: .02em;
}
.kpi-label{
  margin-top: 4px;
  color: var(--muted);
  font-size: 12px;
  letter-spacing: .10em;
}

.hint-row{
  display:flex;
  align-items:center;
  gap: 10px;
  margin-top: 12px;
}
.hint{
  width: 30px;
  height: 30px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--text);
  cursor:pointer;
  display:grid;
  place-items:center;
  transition: transform var(--t), border-color var(--t), background var(--t);
}
.hint:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 28%, transparent);
  background: color-mix(in oklab, var(--card2) 70%, transparent);
}
.hint:focus-visible{ outline:none; box-shadow: var(--focus); }

.hero-frame{
  height: 100%;
  min-height: 260px;
  border-radius: 22px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 60%, transparent);
  position: relative;
  overflow:hidden;
}
.sigil{
  position:absolute;
  inset:-20%;
  background:
    radial-gradient(circle at 40% 40%, color-mix(in oklab, var(--gold) 18%, transparent), transparent 55%),
    conic-gradient(from 90deg, color-mix(in oklab, var(--accent) 14%, transparent), transparent, color-mix(in oklab, var(--accent2) 10%, transparent), transparent);
  opacity: .55;
  filter: blur(12px);
  transform: rotate(6deg);
}
.hero-card{
  position:absolute;
  inset: 14px;
  border-radius: 20px;
  border: 1px solid var(--line);
  background:
    radial-gradient(800px 300px at 18% 0%, color-mix(in oklab, var(--accent) 18%, transparent), transparent 60%),
    color-mix(in oklab, var(--glass2) 88%, transparent);
  padding: 16px;
  box-shadow: var(--shadow2);
}
.hero-card-top{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  align-items:center;
}
.badge{
  font-size: 12px;
  letter-spacing: .12em;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--muted);
}
.badge-soft{
  color: color-mix(in oklab, var(--gold) 70%, var(--text));
  border-color: color-mix(in oklab, var(--gold) 24%, transparent);
}
.hero-card-title{
  margin-top: 16px;
  font-weight: 1000;
  font-size: 20px;
  letter-spacing: .02em;
}
.hero-card-sub{
  margin-top: 6px;
  color: var(--muted);
  font-size: 13px;
}
.hero-card-line{
  margin-top: 14px;
  height: 1px;
  background: color-mix(in oklab, var(--line) 70%, transparent);
}
.hero-card-mini{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  margin-top: 14px;
}
.mini-pill{
  font-size: 12px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--muted);
}

.banner{
  margin-top: 12px;
  border-radius: 16px;
  border: 1px solid var(--line);
  padding: 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}
.banner-warn{
  border-color: var(--warnLine);
  background: var(--warn);
}

.rec-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-top: 12px;
}
@media (max-width: 980px){
  .rec-grid{ grid-template-columns: 1fr; }
}

.card{
  border: 1px solid var(--line);
  border-radius: 18px;
  background:
    radial-gradient(700px 260px at 10% 0%, color-mix(in oklab, var(--accent) 14%, transparent), transparent 60%),
    color-mix(in oklab, var(--card) 75%, transparent);
  box-shadow: var(--shadow2);
  padding: 14px;
  transition: transform var(--t), border-color var(--t), background var(--t);
  cursor:pointer;
  position: relative;
  overflow:hidden;
}
.card:hover{
  transform: translateY(-2px);
  border-color: color-mix(in oklab, var(--accent) 26%, transparent);
  background: color-mix(in oklab, var(--card2) 78%, transparent);
}
.card:focus-visible{ outline:none; box-shadow: var(--focus); }
.card-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
}
.card-title{
  font-weight: 1000;
  line-height: 1.25;
  letter-spacing: .01em;
}
.card-id{
  font-family: var(--mono);
  font-size: 12px;
  letter-spacing: .08em;
  color: var(--muted);
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 5px 8px;
  background: color-mix(in oklab, var(--card) 70%, transparent);
  white-space: nowrap;
}
.pills{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  margin-top: 10px;
}
.pill{
  font-size: 12px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--muted);
}
.pill-acc{
  color: color-mix(in oklab, var(--accent) 70%, var(--text));
  border-color: color-mix(in oklab, var(--accent) 24%, transparent);
}
.pill-gold{
  color: color-mix(in oklab, var(--gold) 74%, var(--text));
  border-color: color-mix(in oklab, var(--gold) 22%, transparent);
}
.card-sub{
  margin-top: 10px;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.7;
}
.card-foot{
  margin-top: 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 10px;
}
.card-reason{
  font-size: 12px;
  color: var(--muted2);
}
.card-go{
  color: var(--muted);
  font-size: 13px;
}

.pager{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px dashed color-mix(in oklab, var(--line) 70%, transparent);
}
.divider{
  margin: 12px 0;
  height: 1px;
  background: color-mix(in oklab, var(--line) 70%, transparent);
}

.chips{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  margin-top: 12px;
}
.chip{
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--muted);
  padding: 9px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: transform var(--t), border-color var(--t), background var(--t), color var(--t);
}
.chip:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 26%, transparent);
  background: color-mix(in oklab, var(--card2) 70%, transparent);
  color: var(--text);
}
.chip.is-selected{
  border-color: color-mix(in oklab, var(--accent) 42%, transparent);
  background: color-mix(in oklab, var(--accent) 14%, transparent);
  color: var(--text);
}
.chips-selected .chip{
  border-color: color-mix(in oklab, var(--accent2) 32%, transparent);
  background: color-mix(in oklab, var(--accent2) 12%, transparent);
}

.tag-pick{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
}
.tag-pick-left{ min-width: 0; }
.tag-pick-right{
  display:flex;
  gap: 10px;
  align-items:center;
}
@media (max-width: 980px){
  .tag-pick{ flex-direction: column; align-items: stretch; }
  .tag-pick-right{ justify-content:flex-end; }
}

.shortcut-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-top: 12px;
}
@media (max-width: 980px){
  .shortcut-grid{ grid-template-columns: 1fr; }
}
.shortcut{
  border: 1px solid var(--line);
  border-radius: 18px;
  background: color-mix(in oklab, var(--card) 70%, transparent);
  padding: 14px;
  display:flex;
  align-items:center;
  gap: 12px;
  cursor:pointer;
  transition: transform var(--t), border-color var(--t), background var(--t);
}
.shortcut:hover{
  transform: translateY(-2px);
  border-color: color-mix(in oklab, var(--accent) 26%, transparent);
  background: color-mix(in oklab, var(--card2) 70%, transparent);
}
.shortcut:focus-visible{ outline:none; box-shadow: var(--focus); }
.shortcut-ic{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  display:grid;
  place-items:center;
}
.shortcut-title{ font-weight: 1000; }
.shortcut-sub{ margin-top: 4px; font-size: 13px; line-height: 1.5; }
.shortcut-go{ margin-left:auto; color: var(--muted); }

.fab{
  position: fixed;
  right: 14px;
  bottom: 14px;
  z-index: 40;
}
.fab-btn{
  width: 46px;
  height: 46px;
  border-radius: 16px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--glass2) 78%, transparent);
  backdrop-filter: blur(14px);
  color: var(--text);
  cursor:pointer;
  box-shadow: var(--shadow2);
  transition: transform var(--t), border-color var(--t);
}
.fab-btn:hover{
  transform: translateY(-2px);
  border-color: color-mix(in oklab, var(--accent) 28%, transparent);
}
.fab-btn:focus-visible{ outline:none; box-shadow: var(--focus); }

/* modal */
.modal{
  position: fixed;
  inset: 0;
  display:none;
  z-index: 80;
}
.modal.is-show{ display:block; }
.modal-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
}
.modal-panel{
  position: relative;
  width: min(820px, calc(100% - 28px));
  margin: 10dvh auto;
  border-radius: 22px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--glass2) 86%, transparent);
  box-shadow: var(--shadow);
  overflow:hidden;
  max-height: calc(100dvh - 20dvh);
  display:flex;
  flex-direction:column;
}
.modal-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
  padding: 14px 14px 12px;
  border-bottom: 1px solid color-mix(in oklab, var(--line) 70%, transparent);
}
.modal-title{
  font-weight: 1000;
  letter-spacing: .02em;
}
.modal-sub{
  margin-top: 4px;
  font-size: 13px;
  line-height: 1.5;
}
.modal-close{
  width: 40px;
  height: 40px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 70%, transparent);
  color: var(--text);
  cursor:pointer;
  display:grid;
  place-items:center;
  transition: transform var(--t), border-color var(--t);
}
.modal-close:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 28%, transparent);
}
.modal-close:focus-visible{ outline:none; box-shadow: var(--focus); }
.modal-body{
  padding: 14px;
  overflow:auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.modal-row{
  display:flex;
  align-items:center;
  gap: 10px;
  margin-bottom: 12px;
}
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px dashed color-mix(in oklab, var(--line) 70%, transparent);
}
.modal-scroller{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  padding: 10px;
  border: 1px solid var(--line);
  border-radius: 18px;
  background: color-mix(in oklab, var(--card) 70%, transparent);
  max-height: 44dvh;
  overflow:auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.input{
  width: 100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--card) 60%, transparent);
  color: var(--text);
  outline:none;
}
.input:focus{
  border-color: color-mix(in oklab, var(--accent) 34%, transparent);
  box-shadow: var(--focus);
}

/* popover */
.popover{
  position: fixed;
  inset: 0;
  z-index: 90;
  display:none;
}
.popover.is-show{ display:block; }
.popover-panel{
  position:absolute;
  width: min(420px, calc(100% - 28px));
  right: 14px;
  top: 64px;
  border-radius: 18px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--glass2) 88%, transparent);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.popover-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 12px 10px;
  border-bottom: 1px solid color-mix(in oklab, var(--line) 70%, transparent);
}
.popover-title{
  font-weight: 1000;
}
.popover-body{
  padding: 12px;
  line-height: 1.75;
  color: var(--muted);
  font-size: 14px;
}
.popover-foot{
  padding: 12px;
  padding-top: 0;
  display:flex;
  justify-content:flex-end;
}

/* prose */
.prose{
  line-height: 1.85;
  color: var(--muted);
  font-size: 14px;
}
.prose h3{
  margin: 14px 0 6px;
  color: var(--text);
}
.prose ul{ margin: 8px 0 0 18px; }
.prose li{ margin: 6px 0; }

/* toast */
.toast-host{
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%);
  z-index: 100;
  display:flex;
  flex-direction:column;
  gap: 10px;
  pointer-events:none;
}
.toast{
  pointer-events:none;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: color-mix(in oklab, var(--glass2) 88%, transparent);
  color: var(--text);
  padding: 10px 12px;
  box-shadow: var(--shadow2);
  opacity:0;
  transform: translateY(6px);
  transition: opacity 160ms var(--ease), transform 160ms var(--ease);
}
.toast.is-show{
  opacity:1;
  transform: translateY(0);
}

/* motion preference */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; scroll-behavior:auto !important; }
}