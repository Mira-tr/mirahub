<!doctype html>
<html lang="ja" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MIRAHUB</title>
  <meta name="description" content="TRPG用まとめ拠点：所持シナリオ一覧・卓案内・リンク集" />

  <link rel="stylesheet" href="./style.css" />

  <script>
  (function(){
    try{
      const t = localStorage.getItem("mirahub.theme");
      if(t) document.documentElement.setAttribute("data-theme", t);
    }catch(e){}
  })();
  </script>
</head>

<body class="hub">

<header class="layout-header">
  <div class="layout-wrap layout-header-inner">
    <a class="brand" href="./" aria-label="MIRAHUB">
      <span class="brand-mark" aria-hidden="true">
        <span class="brand-ring"></span>
        <span class="brand-dot"></span>
      </span>
      <span class="brand-text">
        <span class="brand-title">MIRAHUB</span>
        <span class="brand-sub">TRPG Archive</span>
      </span>
    </a>

    <nav class="nav">
      <a class="nav-link nav-link-active" href="./">HUB</a>
      <a class="nav-link" href="./scenarios/">Scenarios</a>
      <a class="nav-link" href="./shinji/">しんじ卓</a>

      <button class="icon-btn" id="themeToggle" type="button" aria-label="テーマ切替">🌓</button>
    </nav>
  </div>
</header>

<main id="top" class="layout-wrap hub-main">

  <!-- HERO (the face) -->
  <section class="hub-hero" aria-labelledby="heroTitle">
    <div class="hub-hero-inner">
      <div class="hub-hero-center">
        <div class="hub-hero-sigil" aria-hidden="true">
          <div class="sigil-line"></div>
          <div class="sigil-core"></div>
        </div>

        <h1 class="hub-hero-title" id="heroTitle">
          <span class="hub-hero-title-main">MIRAHUB</span>
          <span class="hub-hero-title-sub">TRPG Archive</span>
        </h1>

        <p class="hub-hero-lead">
          シナリオの記録と世界線の拠点。<span class="hub-hero-note">（所持シナリオのみ公開）</span>
        </p>

        <div class="hub-hero-actions">
          <a class="btn btn-primary" href="./scenarios/">シナリオ一覧</a>
          <a class="btn btn-ghost" href="./shinji/">しんじ卓</a>

          <button class="btn btn-ghost btn-dice" id="btnRandom" type="button">
            <span class="dice-ico" aria-hidden="true">🎲</span>
            ランダムで1本
          </button>
        </div>

        <div class="hub-hero-hint">
          <span class="hint-pill">URL共有：<code>/scenarios/#S0001</code></span>
          <span class="hint-pill">⭐お気に入り：ランキングに反映</span>
        </div>
      </div>

      <div class="hub-hero-right" aria-hidden="true">
        <div class="hub-hero-portal">
          <div class="portal-glow"></div>
          <div class="portal-rift"></div>
          <div class="portal-grid"></div>
          <div class="portal-caption">
            <div class="portal-cap-title">WORLDLINE</div>
            <div class="portal-cap-sub">convergence point</div>
          </div>
        </div>
      </div>
    </div>

    <a class="hub-scroll" href="#content" aria-label="下へスクロール">
      <span class="hub-scroll-line" aria-hidden="true"></span>
      <span class="hub-scroll-text">Scroll</span>
    </a>
  </section>

  <!-- CONTENT -->
  <div id="content" class="hub-content">

    <!-- KPI -->
    <section class="section-card hub-kpi" aria-labelledby="kpiTitle">
      <div class="section-head">
        <h2 id="kpiTitle">Overview</h2>
        <div class="section-actions">
          <button class="btn btn-ghost btn-sm" id="btnSync" type="button">データ取得</button>
          <span class="text-muted" id="hubStatus">キャッシュ未取得</span>
        </div>
      </div>

      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">所持シナリオ</div>
          <div class="kpi-value" id="kpiCount">—</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">⭐総数</div>
          <div class="kpi-value" id="kpiFavSum">—</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">最終更新</div>
          <div class="kpi-value kpi-small" id="kpiUpdated">—</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">人気TOP1</div>
          <div class="kpi-value kpi-small" id="kpiTop1">—</div>
        </div>
      </div>

      <p class="text-muted hub-kpi-note">
        ※トップは毎回APIへアクセスしません。10分キャッシュを優先し、必要なときだけ更新します。
      </p>
    </section>

    <!-- TOP10 -->
    <section class="section-card hub-rank" aria-labelledby="rankTitle">
      <div class="section-head">
        <div>
          <h2 id="rankTitle">Top 10</h2>
          <p class="text-muted" id="rankSub">⭐が育っていない場合は新着TOP10を表示します</p>
        </div>
        <div class="section-actions">
          <a class="btn btn-ghost btn-sm" href="./scenarios/">ランキングを見る</a>
        </div>
      </div>

      <div class="rank-strip" id="rankStrip" tabindex="0" aria-label="ランキング横スクロール">
        <!-- JS inject -->
        <div class="rank-empty text-muted" id="rankEmpty">データ未取得：上の「データ取得」を押すか、Scenariosを開くと反映されます。</div>
      </div>
    </section>

    <!-- NEW -->
    <section class="section-card hub-new" aria-labelledby="newTitle">
      <div class="section-head">
        <h2 id="newTitle">Latest</h2>
        <div class="section-actions">
          <a class="btn btn-ghost btn-sm" href="./scenarios/">一覧へ</a>
        </div>
      </div>

      <div class="new-grid" id="newGrid">
        <div class="new-empty text-muted">データ未取得</div>
      </div>
    </section>

    <!-- ENTRY -->
    <section class="hub-entry">
      <div class="entry-grid">
        <a class="entry-card" href="./scenarios/">
          <div class="entry-title">Scenarios</div>
          <div class="entry-desc text-muted">
            検索・タグ・⭐お気に入り・ランキング。<br>
            “迷わない”所持シナリオ管理。
          </div>
          <div class="entry-cta">開く →</div>
        </a>

        <a class="entry-card" href="./shinji/">
          <div class="entry-title">しんじ卓</div>
          <div class="entry-desc text-muted">
            参加案内・ルール・Q&A・運営情報。<br>
            卓の入口はこちら。
          </div>
          <div class="entry-cta">開く →</div>
        </a>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="section-card hub-about" aria-labelledby="aboutTitle">
      <div class="section-head">
        <h2 id="aboutTitle">About</h2>
      </div>

      <div class="about-box">
        <div class="about-name">Mira</div>
        <p class="about-text">
          TRPGは物語の記録だと思っている。<br>
          このHUBはその保管庫。所持シナリオのみ公開。
        </p>
        <p class="text-muted about-sub">
          最終更新やランキングは Scenarios のデータと同期します。
        </p>
      </div>
    </section>

  </div>
</main>

<footer class="layout-footer">
  <div class="layout-wrap footer-inner">
    <div>© MIRAHUB</div>
    <a class="footer-link" href="#top">↑ Top</a>
  </div>
</footer>

<script src="./hub.js"></script>
</body>
</html>