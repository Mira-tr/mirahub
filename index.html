<!-- /index.html -->
<!doctype html>
<html lang="ja" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <title>MIRAHUB</title>
  <meta name="description" content="TRPG用まとめ拠点：おすすめ・タグで探す・シナリオ管理" />
  <link rel="stylesheet" href="./style.css" />
  <script>
  (function(){
    try{
      const t = localStorage.getItem("mirahub.theme");
      if(t) document.documentElement.setAttribute("data-theme", t);
    }catch(e){}
  })();
  </script>
</head>
<body>

<header class="layout-header">
  <div class="layout-wrap layout-header-inner">
    <div class="brand">
      <span class="brand-dot" aria-hidden="true"></span>
      <a class="brand-link" href="./">MIRAHUB</a>
    </div>

    <nav class="nav" aria-label="主要ナビゲーション">
      <a class="nav-link" href="./scenarios/">シナリオ</a>
      <a class="nav-link" href="./shinji/">しんじ卓</a>
      <button class="icon-btn" id="themeToggle" type="button" aria-label="テーマ切替" title="テーマ切替">🌓</button>
    </nav>
  </div>
</header>

<main class="layout-wrap hub" id="top">

  <!-- HERO -->
  <section class="hero">
    <div class="hero-grid">
      <div class="hero-left">
        <p class="text-tag">OFFICIAL / PERSONAL HUB</p>
        <h1 class="text-hero">
          ここは<span class="glow">MIRAHUB</span>。<br>
          TRPGの案内と管理の拠点。
        </h1>
        <p class="text-lead text-muted">
          ミラが運営してる個人HUB。<br>
          “迷わない” 形で、見やすく、強く、美しく。
        </p>

        <div class="btn-row">
          <a class="btn btn-primary" href="./scenarios/">シナリオ一覧へ</a>
          <a class="btn btn-ghost" href="./shinji/">しんじ卓へ</a>
          <button class="btn btn-ghost" id="btnRefresh" type="button">更新</button>
        </div>

        <div class="kpis" aria-label="サマリー">
          <div class="kpi">
            <div class="kpi-num" id="kpiCount">—</div>
            <div class="kpi-label">所持シナリオ</div>
          </div>
          <div class="kpi">
            <div class="kpi-num" id="kpiUpdated">—</div>
            <div class="kpi-label">最終同期</div>
          </div>
          <div class="kpi">
            <div class="kpi-num" id="kpiStatus">—</div>
            <div class="kpi-label">状態</div>
          </div>
        </div>

        <div class="hint-row">
          <button class="hint" type="button" data-help="hub" aria-label="このページの使い方">？</button>
          <span class="text-muted">おすすめ・タグからシナリオへ最短導線。</span>
        </div>
      </div>

      <div class="hero-right" aria-hidden="true">
        <div class="hero-frame">
          <div class="sigil"></div>
          <div class="hero-card">
            <div class="hero-card-top">
              <span class="badge">TRPG / SCENARIOS</span>
              <span class="badge badge-soft">MIRA</span>
            </div>
            <div class="hero-card-title">世界線の入口</div>
            <div class="hero-card-sub">検索・お気に入り・トレーラー</div>
            <div class="hero-card-line"></div>
            <div class="hero-card-mini">
              <div class="mini-pill">#coc</div>
              <div class="mini-pill">#初心者</div>
              <div class="mini-pill">#シティ</div>
              <div class="mini-pill">#秘匿HO</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- RECOMMENDED -->
  <section class="section-card">
    <div class="section-head">
      <div class="section-titleRow">
        <h2 class="section-title">おすすめ</h2>
        <div class="section-sub text-muted">固定/最近/日替わり。クリックで詳細へ。</div>
      </div>
      <div class="section-actions">
        <button class="icon-btn" type="button" data-help="recommended" aria-label="おすすめとは">？</button>
        <a class="btn btn-ghost btn-sm" href="./scenarios/">一覧で探す</a>
      </div>
    </div>

    <div class="banner banner-warn" id="syncBanner" hidden>
      <div class="banner-text">
        <strong>同期できませんでした。</strong> キャッシュを表示しています。
      </div>
      <button class="btn btn-ghost btn-sm" id="btnRetry" type="button">再試行</button>
    </div>

    <div class="rec-grid" id="recGrid" aria-live="polite"></div>

    <div class="pager">
      <div class="pager-left">
        <span class="text-muted" id="recInfo">—</span>
      </div>
      <div class="pager-right">
        <button class="btn btn-ghost btn-sm" id="btnRecPrev" type="button">前へ</button>
        <button class="btn btn-ghost btn-sm" id="btnRecNext" type="button">次へ</button>
      </div>
    </div>
  </section>

  <!-- TAGS -->
  <section class="section-card">
    <div class="section-head">
      <div class="section-titleRow">
        <h2 class="section-title">タグで眺める</h2>
        <div class="section-sub text-muted">よく使われるタグを上に表示。全部見るなら「タグ一覧」。</div>
      </div>
      <div class="section-actions">
        <button class="icon-btn" type="button" data-help="tags" aria-label="タグの使い方">？</button>
        <button class="btn btn-ghost btn-sm" id="btnTagModal" type="button">タグ一覧</button>
        <a class="btn btn-ghost btn-sm" id="btnBrowseAll" href="./scenarios/">一覧で探す</a>
      </div>
    </div>

    <div class="chips" id="topTags" aria-label="人気タグ"></div>
    <div class="divider"></div>

    <div class="tag-pick">
      <div class="tag-pick-left">
        <div class="text-muted">選択中：</div>
        <div class="chips chips-selected" id="pickedTags"></div>
      </div>
      <div class="tag-pick-right">
        <button class="btn btn-ghost btn-sm" id="btnClearTags" type="button">クリア</button>
        <a class="btn btn-primary btn-sm" id="btnSearchWithTags" href="./scenarios/">この条件で探す</a>
      </div>
    </div>
  </section>

  <!-- SHORTCUTS -->
  <section class="section-card">
    <div class="section-head">
      <div class="section-titleRow">
        <h2 class="section-title">できること</h2>
        <div class="section-sub text-muted">Webの顔として、綺麗で、強くて、迷わない。</div>
      </div>
      <div class="section-actions">
        <button class="icon-btn" type="button" data-help="shortcuts" aria-label="ショートカットの説明">？</button>
      </div>
    </div>

    <div class="shortcut-grid">
      <a class="shortcut" href="./scenarios/">
        <div class="shortcut-ic" aria-hidden="true">📚</div>
        <div class="shortcut-txt">
          <div class="shortcut-title">シナリオ管理</div>
          <div class="shortcut-sub text-muted">検索・絞り込み・詳細・トレーラー</div>
        </div>
        <div class="shortcut-go" aria-hidden="true">→</div>
      </a>

      <a class="shortcut" href="./shinji/">
        <div class="shortcut-ic" aria-hidden="true">🧭</div>
        <div class="shortcut-txt">
          <div class="shortcut-title">卓案内</div>
          <div class="shortcut-sub text-muted">ルール・Q&A・運営</div>
        </div>
        <div class="shortcut-go" aria-hidden="true">→</div>
      </a>

      <button class="shortcut" type="button" id="btnScrollTop">
        <div class="shortcut-ic" aria-hidden="true">🜁</div>
        <div class="shortcut-txt">
          <div class="shortcut-title">トップへ戻る</div>
          <div class="shortcut-sub text-muted">スクロールしても迷わない</div>
        </div>
        <div class="shortcut-go" aria-hidden="true">↑</div>
      </button>
    </div>
  </section>

  <div class="fab">
    <button class="fab-btn" id="fabTop" type="button" aria-label="トップへ">↑</button>
  </div>

</main>

<footer class="layout-footer">© MIRAHUB</footer>

<!-- TAG MODAL -->
<div class="modal" id="tagModal" aria-hidden="true">
  <div class="modal-backdrop" data-close></div>
  <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="tagModalTitle">
    <div class="modal-top">
      <div class="modal-titleWrap">
        <div id="tagModalTitle" class="modal-title">タグ一覧</div>
        <div class="modal-sub text-muted">検索して追加できます。</div>
      </div>
      <button class="modal-close" type="button" data-close aria-label="閉じる">✕</button>
    </div>

    <div class="modal-body">
      <div class="modal-row">
        <input class="input" id="tagSearch" type="search" placeholder="タグ検索（例：#coc / シティ / 初心者）" />
        <button class="btn btn-ghost btn-sm" id="btnTagSearchClear" type="button">クリア</button>
      </div>

      <div class="modal-row">
        <div class="text-muted">選択中：</div>
        <div class="chips chips-selected" id="modalPicked"></div>
      </div>

      <div class="modal-scroller" id="tagList" aria-label="タグ一覧"></div>

      <div class="modal-actions">
        <button class="btn btn-ghost" type="button" data-close>閉じる</button>
        <a class="btn btn-primary" id="btnGoWithTags" href="./scenarios/">この条件で探す</a>
      </div>
    </div>
  </div>
</div>

<!-- HELP POPOVER -->
<div class="popover" id="popover" aria-hidden="true">
  <div class="popover-panel" role="dialog" aria-modal="false">
    <div class="popover-head">
      <div class="popover-title" id="popoverTitle">ヘルプ</div>
      <button class="icon-btn" id="popoverClose" type="button" aria-label="閉じる">✕</button>
    </div>
    <div class="popover-body" id="popoverBody"></div>
    <div class="popover-foot">
      <button class="btn btn-ghost btn-sm" id="popoverMore" type="button">もっと詳しく</button>
    </div>
  </div>
</div>

<!-- HELP MODAL -->
<div class="modal" id="helpModal" aria-hidden="true">
  <div class="modal-backdrop" data-close></div>
  <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
    <div class="modal-top">
      <div class="modal-titleWrap">
        <div id="helpTitle" class="modal-title">ヘルプ</div>
        <div class="modal-sub text-muted">操作のコツ。</div>
      </div>
      <button class="modal-close" type="button" data-close aria-label="閉じる">✕</button>
    </div>
    <div class="modal-body prose" id="helpBody"></div>
  </div>
</div>

<!-- TOAST -->
<div class="toast-host" id="toastHost" aria-live="polite"></div>

<script src="./hub.js"></script>
</body>
</html>