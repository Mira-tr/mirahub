<!-- scenarios/index.html -->
<!doctype html>
<html lang="ja" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MIRAHUB / Scenarios</title>
  <link rel="stylesheet" href="./scenarios.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-dot"></div>
        <div class="brand-text">MIRAHUB <span class="muted">/ Scenarios</span></div>
      </div>

      <nav class="nav">
        <a class="nav-link" href="../">HUB</a>
        <a class="nav-link is-active" href="./">Scenarios</a>
      </nav>

      <div class="top-actions">
        <button id="themeToggle" class="btn btn-ghost" type="button" aria-label="テーマ切替">🌓</button>
        <button id="refreshBtn" class="btn" type="button">更新</button>
        <button id="resetFiltersBtn" class="btn btn-ghost" type="button">リセット</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="panel hero">
      <div class="hero-left">
        <div class="hero-kicker">TRPG / SCENARIOS</div>
        <h1 class="hero-title">世界線の入口。</h1>
        <p class="hero-sub">検索・タグ・範囲指定（人数/時間/ロスト）で、迷わず探す。</p>

        <div class="hero-tools">
          <div class="tabs">
            <button class="tab sc-tab is-active" type="button" data-view="cards">カード</button>
            <button class="tab sc-tab" type="button" data-view="table">表</button>
          </div>

          <label class="toggle">
            <input id="toggleCompact" type="checkbox" />
            <span>コンパクト</span>
          </label>

          <label class="toggle">
            <input id="toggleShowTrailers" type="checkbox" checked />
            <span>トレーラー</span>
          </label>
        </div>

        <div class="statusRow">
          <div id="status" class="statusChip">—</div>
          <div id="metaRow" class="muted">—</div>
        </div>
      </div>

      <div class="hero-right">
        <div class="panel mini">
          <div class="mini-title">検索</div>
          <div class="mini-row">
            <input id="searchInput" class="input" type="search" placeholder="ID / タイトル / タグ / メモ …" />
          </div>
          <div class="mini-row mini-split">
            <div class="mini-col">
              <div class="mini-label">並び替え</div>
              <select id="sortSelect" class="select">
                <option value="id_desc">ID（新→旧）</option>
                <option value="id_asc">ID（旧→新）</option>
                <option value="name_asc">名前（A→Z）</option>
                <option value="name_desc">名前（Z→A）</option>
                <option value="updated_desc">更新（新→旧）</option>
                <option value="updated_asc">更新（旧→新）</option>
                <option value="fav_desc">★（お気に入り優先）</option>
              </select>
            </div>
            <div class="mini-col">
              <div class="mini-label">表示</div>
              <div id="resultInfo" class="mini-value">—</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="panel controls">
      <div class="controls-grid">

        <div class="ctrl">
          <div class="ctrl-label">System</div>
          <select id="filterSystem" class="select">
            <option value="">指定なし</option>
          </select>
        </div>

        <div class="ctrl">
          <div class="ctrl-label">形式</div>
          <select id="filterFormat" class="select">
            <option value="">指定なし</option>
          </select>
        </div>

        <div class="ctrl">
          <div class="ctrl-label">R18</div>
          <select id="filterR18" class="select">
            <option value="">指定なし</option>
            <option value="none">なし</option>
            <option value="any">あり（軽/混/重）</option>
            <option value="unknown">不明</option>
          </select>
        </div>

        <div class="ctrl">
          <div class="ctrl-label">人数（自分で範囲指定）</div>
          <div class="range">
            <input id="playersMin" class="input" inputmode="numeric" placeholder="最小" />
            <span class="range-sep">〜</span>
            <input id="playersMax" class="input" inputmode="numeric" placeholder="最大" />
            <button id="playersClear" class="btn btn-ghost btn-mini" type="button">クリア</button>
          </div>
          <div class="hint">例：2〜4 / 1〜 / 〜6</div>
        </div>

        <div class="ctrl">
          <div class="ctrl-label">時間（自分で範囲指定 / h）</div>
          <div class="range">
            <input id="timeMin" class="input" inputmode="decimal" placeholder="最小(h)" />
            <span class="range-sep">〜</span>
            <input id="timeMax" class="input" inputmode="decimal" placeholder="最大(h)" />
            <button id="timeClear" class="btn btn-ghost btn-mini" type="button">クリア</button>
          </div>
          <div class="hint">例：2〜3 / 2.5〜 / 〜6</div>
        </div>

        <div class="ctrl">
          <div class="ctrl-label">ロスト率（自分で範囲指定 / %）</div>
          <div class="range">
            <input id="lossMin" class="input" inputmode="numeric" placeholder="最小(%)" />
            <span class="range-sep">〜</span>
            <input id="lossMax" class="input" inputmode="numeric" placeholder="最大(%)" />
            <button id="lossClear" class="btn btn-ghost btn-mini" type="button">クリア</button>
          </div>
          <div class="hint">例：0〜30 / 40〜70 / 80〜</div>
        </div>

        <div class="ctrl ctrl-wide">
          <div class="ctrl-top">
            <div class="ctrl-label">タグ</div>
            <div class="ctrl-actions">
              <button id="tagsModeBtn" class="btn btn-ghost btn-mini" type="button">条件：OR</button>
              <button id="tagsClearBtn" class="btn btn-ghost btn-mini" type="button">タグ解除</button>
            </div>
          </div>

          <div class="tags-bar">
            <input id="tagsSearchInput" class="input" type="search" placeholder="タグ検索（候補を絞る）" />
          </div>

          <div class="tags-grid" id="tagsChips"></div>

          <div class="picked">
            <div class="picked-label muted">選択中</div>
            <div id="tagsSelected" class="tags-picked"></div>
          </div>
        </div>

      </div>
    </section>

    <section class="panel view">
      <div id="pagerHost" class="pager">
        <button type="button" class="btn btn-ghost" data-pager="prev">前へ</button>
        <div id="pagerInfo" class="pager-info muted">—</div>
        <button type="button" class="btn btn-ghost" data-pager="next">次へ</button>
      </div>

      <div id="scenarioGrid" class="grid"></div>

      <div id="tableWrap" class="tableWrap" style="display:none;">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th><th>名前</th><th>System</th><th>人数</th><th>形式</th><th>時間</th><th>R18</th><th>ロスト</th><th>★</th><th>URL</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Detail Modal -->
  <div class="modal" id="detailModal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
      <div class="modal-top">
        <div class="modal-titleWrap">
          <div id="detailTitle" class="modal-title">詳細</div>
          <div id="detailSub" class="modal-sub muted"></div>
        </div>
        <button class="modal-close" data-close type="button" aria-label="閉じる">✕</button>
      </div>
      <div id="detailBody"></div>
    </div>
  </div>

  <!-- Zoom Modal -->
  <div class="modal" id="zoomModal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel modal-panel--zoom" role="dialog" aria-modal="true">
      <button class="modal-close" data-close type="button" aria-label="閉じる">✕</button>
      <img id="zoomImage" class="zoom-img" alt="zoom" />
    </div>
  </div>

  <!-- Confirm Modal -->
  <div class="confirm" id="confirmModal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="confirm-panel" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
      <div class="confirm-top">
        <div id="confirmTitle" class="confirm-title">確認</div>
        <button class="modal-close" data-close type="button" aria-label="閉じる">✕</button>
      </div>
      <div id="confirmMessage" class="confirm-msg">外部サイトへ移動しますか？</div>
      <label class="confirm-check">
        <input id="confirmDontAsk" type="checkbox" />
        <span>次から確認しない</span>
      </label>
      <div class="confirm-actions">
        <button id="confirmCancel" class="btn btn-ghost" type="button">キャンセル</button>
        <button id="confirmOk" class="btn" type="button">OK</button>
      </div>
    </div>
  </div>

  <div id="toastHost" class="toastHost" aria-live="polite"></div>

  <script src="./scenarios.js"></script>
</body>
</html>