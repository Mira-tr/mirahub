<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>シナリオ一覧 | MIRAHUB</title>
  <meta name="description" content="所持シナリオ一覧：検索・絞り込み・URLコピー" />

  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="./scenarios.css" />
</head>

<body>

<header class="layout-header">
  <div class="layout-wrap layout-header-inner">
    <div class="brand">
      <span class="brand-dot"></span>
      <a href="../">MIRAHUB</a>
      <span class="text-muted">/</span>
      <span>シナリオ一覧</span>
    </div>

    <nav class="nav">
      <a class="nav-link" href="../shinji/">しんじ卓</a>
      <a class="nav-link nav-link-active" href="./">シナリオ</a>
    </nav>
  </div>
</header>

<main class="layout-wrap sc-layout" id="top">

  <!-- 左：本文 -->
  <div class="sc-main">
    <section class="section-hero">
      <p class="text-tag">SCENARIO / SEARCH</p>
      <h1 class="text-hero">シナリオ一覧</h1>
      <p class="text-lead text-muted">
        100本以上の所持シナリオを検索・絞り込み。<br>
        URLコピー／外部リンク確認／R18強調表示つき。
      </p>

      <div class="btn-row">
        <a class="btn btn-ghost" href="../">MIRAHUBトップへ</a>
        <button class="btn btn-ghost" id="btnReload" type="button">再取得</button>
        <span class="text-muted" id="status" style="align-self:center;">待機中</span>
      </div>

      <div class="sc-metaRow text-muted" id="metaRow" style="display:none;"></div>
    </section>

    <section class="section-card">
      <h2>表示</h2>
      <div class="sc-tabs">
        <button type="button" class="sc-tab is-active" data-view="cards">カード</button>
        <button type="button" class="sc-tab" data-view="table">表</button>
      </div>

      <div class="sc-tools">
        <button type="button" class="btn btn-ghost" id="btnClear">条件クリア</button>
        <button type="button" class="btn btn-ghost" id="btnCopyQuery">条件をコピー</button>
        <button type="button" class="btn btn-ghost" id="btnCopyResult">件数をコピー</button>
      </div>

      <div class="text-muted" id="resultInfo" style="margin-top:10px;"></div>
    </section>

    <section class="section-card">
      <h2>結果</h2>
      <div id="cards" class="sc-cards"></div>

      <div id="tableWrap" style="display:none;">
        <div class="sc-tableWrap">
          <table class="sc-table">
            <thead>
              <tr>
                <th>ID</th><th>名前</th><th>System</th><th>人数</th><th>形式</th><th>時間</th><th>R18</th><th>ロスト</th><th>タグ</th><th>URL</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <!-- 右：フィルタ -->
  <aside class="sc-aside">
    <section class="section-card">
      <h2>検索・絞り込み</h2>

      <div class="sc-field">
        <label class="sc-label" for="q">キーワード（スペースでAND）</label>
        <input id="q" class="sc-input" type="text" placeholder="例：CoC6 ボイセ 1PL など" />
      </div>

      <div class="sc-grid">
        <div class="sc-field">
          <label class="sc-label" for="system">System</label>
          <select id="system" class="sc-select">
            <option value="">すべて</option>
          </select>
        </div>

        <div class="sc-field">
          <label class="sc-label" for="format">形式</label>
          <select id="format" class="sc-select">
            <option value="">すべて</option>
            <option value="ボイセ">ボイセ</option>
            <option value="テキセ">テキセ</option>
            <option value="どちらでも">どちらでも</option>
          </select>
        </div>

        <div class="sc-field">
          <label class="sc-label" for="players">人数</label>
          <select id="players" class="sc-select">
            <option value="">すべて</option>
            <option value="1PL">1PL</option>
            <option value="KPC+1PL">KPC+1PL</option>
            <option value="2PL">2PL</option>
            <option value="3PL">3PL</option>
            <option value="4PL">4PL</option>
            <option value="何人でも">何人でも</option>
            <option value="KPレス">KPレス</option>
          </select>
        </div>

        <div class="sc-field">
          <label class="sc-label" for="time">時間</label>
          <select id="time" class="sc-select">
            <option value="">すべて</option>
            <option value="~10h">~10h</option>
            <option value="10-20h">10-20h</option>
            <option value="20-30h">20-30h</option>
            <option value="30-40h">30-40h</option>
            <option value="40h+">40h+</option>
          </select>
        </div>

        <div class="sc-field">
          <label class="sc-label" for="r18">R18</label>
          <select id="r18" class="sc-select">
            <option value="">すべて</option>
            <option value="あり">あり（soft/hard含む）</option>
            <option value="なし">なし</option>
            <option value="不明">不明</option>
          </select>
        </div>

        <div class="sc-field">
          <label class="sc-label" for="loss_rate">ロスト率</label>
          <select id="loss_rate" class="sc-select">
            <option value="">すべて</option>
            <option value="不明">不明</option>
            <option value="0-10">0-10</option>
            <option value="10-30">10-30</option>
            <option value="30-50">30-50</option>
            <option value="50-70">50-70</option>
            <option value="70-100">70-100</option>
          </select>
        </div>
      </div>

      <p class="text-muted" style="margin-top:12px; line-height:1.7;">
        📌 タグをクリックすると検索欄に入ります。<br>
        📋 はURLコピー、🔗 は確認して外部移動。
      </p>
    </section>
  </aside>

</main>

<footer class="layout-footer">© MIRAHUB</footer>

<!-- Toast -->
<div id="toast" class="toast" aria-live="polite"></div>

<!-- Confirm Modal（これが無いと「出ない」） -->
<div class="confirm" id="confirmModal" aria-hidden="true">
  <div class="confirm__backdrop" data-close></div>
  <div class="confirm__panel" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="confirm__title" id="confirmTitle">確認</div>
    <div class="confirm__text" id="modalText">外部サイトへ移動しますか？</div>

    <label class="confirm__check">
      <input type="checkbox" id="modalDontAsk" />
      今後（通常リンクは）確認しない
    </label>

    <div class="confirm__actions">
      <button type="button" class="btn btn-ghost" id="modalCancel">キャンセル</button>
      <button type="button" class="btn btn-primary" id="modalOk">移動する</button>
    </div>
  </div>
</div>

<script src="./scenarios.js"></script>
</body>
</html>